{"ast":null,"code":"import _regeneratorRuntime from\"/home/gmr/guiminr/E-Commerce-React/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gmr/guiminr/E-Commerce-React/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/gmr/guiminr/E-Commerce-React/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{commerce}from'./lib/commerce';import{Products,Navbar,Cart,Checkout,MainPage}from'./componets';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),order=_useState6[0],setOrder=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessege=_useState8[0],setErrorMessege=_useState8[1];var fetchProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$commerce$produ,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return commerce.products.list();case 2:_yield$commerce$produ=_context.sent;data=_yield$commerce$produ.data;setProducts(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchProduct(){return _ref.apply(this,arguments);};}();var fetchCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=setCart;_context2.next=3;return commerce.cart.retrieve();case 3:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchCart(){return _ref2.apply(this,arguments);};}();var handleAddToCart=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(productId,quantity){var _yield$commerce$cart$,cart;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return commerce.cart.add(productId,quantity);case 2:_yield$commerce$cart$=_context3.sent;cart=_yield$commerce$cart$.cart;setCart(cart);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleAddToCart(_x,_x2){return _ref3.apply(this,arguments);};}();var handleUpdateCartQty=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(productId,quantity){var _yield$commerce$cart$2,cart;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return commerce.cart.update(productId,{quantity:quantity});case 2:_yield$commerce$cart$2=_context4.sent;cart=_yield$commerce$cart$2.cart;setCart(cart);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUpdateCartQty(_x3,_x4){return _ref4.apply(this,arguments);};}();var handleRemoveFromCart=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(productId){var _yield$commerce$cart$3,cart;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return commerce.cart.remove(productId);case 2:_yield$commerce$cart$3=_context5.sent;cart=_yield$commerce$cart$3.cart;setCart(cart);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function handleRemoveFromCart(_x5){return _ref5.apply(this,arguments);};}();var handleEmptyCart=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _yield$commerce$cart$4,cart;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return commerce.cart.empty();case 2:_yield$commerce$cart$4=_context6.sent;cart=_yield$commerce$cart$4.cart;setCart(cart);case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function handleEmptyCart(){return _ref6.apply(this,arguments);};}();var refreshCart=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var newCart;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return commerce.cart.refresh();case 2:newCart=_context7.sent;setCart(newCart);case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function refreshCart(){return _ref7.apply(this,arguments);};}();var handleCaptureCheckout=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(checkoutTokenId,newOrder){var incomingOrder;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return commerce.checkout.capture(checkoutTokenId,newOrder);case 3:incomingOrder=_context8.sent;setOrder(incomingOrder);refreshCart();_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);setErrorMessege(_context8.t0.data.error.message);case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[0,8]]);}));return function handleCaptureCheckout(_x6,_x7){return _ref8.apply(this,arguments);};}();useEffect(function(){fetchProduct();fetchCart();},[]);// console.log(cart)\nreturn/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{totalItems:cart.total_items}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/products\",children:/*#__PURE__*/_jsx(Products,{products:products,onAddToCart:handleAddToCart})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(MainPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/cart\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,handleUpdateCartQty:handleUpdateCartQty,handleRemoveFromCart:handleRemoveFromCart,handleEmptyCart:handleEmptyCart})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/checkout\",children:/*#__PURE__*/_jsx(Checkout,{cart:cart,order:order,onCaptureCheckout:handleCaptureCheckout,error:errorMessege})})]})]})});};export default App;","map":{"version":3,"sources":["/home/gmr/guiminr/E-Commerce-React/ecommerce/src/App.js"],"names":["React","useState","useEffect","commerce","Products","Navbar","Cart","Checkout","MainPage","BrowserRouter","Router","Switch","Route","App","products","setProducts","cart","setCart","order","setOrder","errorMessege","setErrorMessege","fetchProduct","list","data","fetchCart","retrieve","handleAddToCart","productId","quantity","add","handleUpdateCartQty","update","handleRemoveFromCart","remove","handleEmptyCart","empty","refreshCart","refresh","newCart","handleCaptureCheckout","checkoutTokenId","newOrder","checkout","capture","incomingOrder","error","message","total_items"],"mappings":"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","sourcesContent":["import React, {useState, useEffect } from 'react';\nimport { commerce } from './lib/commerce';\nimport { Products, Navbar, Cart, Checkout, MainPage} from './componets';\nimport { BrowserRouter as Router, Switch, Route} from 'react-router-dom';\n\nconst App = () => {\n    const [products, setProducts] = useState([]);\n    const [cart, setCart] = useState({});\n    const [order, setOrder] = useState({});\n    const [errorMessege, setErrorMessege] = useState('');\n\n    const fetchProduct = async () => {\n        const {data} = await commerce.products.list();\n\n        setProducts(data);\n    };\n    const fetchCart = async () => {\n        \n        setCart(await commerce.cart.retrieve());\n    };\n\n    const handleAddToCart =  async (productId, quantity) => {\n        const {cart} = await commerce.cart.add(productId, quantity);\n\n        setCart(cart);\n    };\n\n    const handleUpdateCartQty =  async (productId, quantity) => {\n        const {cart} = await commerce.cart.update(productId, {quantity} );\n\n        setCart(cart);\n    };\n\n    const handleRemoveFromCart =  async (productId) => {\n        const {cart} = await commerce.cart.remove(productId);\n\n        setCart(cart);\n    };\n\n    const handleEmptyCart =  async () => {\n        const {cart} = await commerce.cart.empty();\n\n        setCart(cart)\n    };\n\n    const refreshCart = async () => {\n        const newCart = await commerce.cart.refresh();\n\n        setCart(newCart);\n    };\n    const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\n        try {\n            const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n            setOrder(incomingOrder);\n            refreshCart();\n        } catch (error) {\n            setErrorMessege(error.data.error.message);\n        }\n    };\n\n    useEffect(() => {\n        fetchProduct();\n        fetchCart();\n    }, []);\n\n    // console.log(cart)\n    return (\n        <Router>\n            <div>\n                <Navbar totalItems={cart.total_items}/>\n                <Switch>\n                    <Route exact path=\"/products\">\n                        <Products products={products} onAddToCart={handleAddToCart}/>\n                        \n                    </Route>\n                    <Route exact path=\"/\">\n                        <MainPage />\n                        \n                    </Route>\n\n                    <Route exact path=\"/cart\"> \n                        <Cart cart={cart} \n                        handleUpdateCartQty = {handleUpdateCartQty}\n                        handleRemoveFromCart = {handleRemoveFromCart}\n                        handleEmptyCart = {handleEmptyCart}\n                        \n                        />\n                    </Route>\n\n                    <Route exact path=\"/checkout\"> \n                        <Checkout\n                            cart={cart}\n                            order={order}\n                            onCaptureCheckout={handleCaptureCheckout}\n                            error={errorMessege}\n                        />\n                    </Route>\n                </Switch>\n                \n                \n            </div>\n        </Router>\n    );\n};\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}